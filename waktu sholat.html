<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Waktu Sholat</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  body{
    font-family:'Poppins', sans-serif;
    background:#f4f7f6;
    margin:0; padding:0;
  }
  header{
    background:#5E915E;
    color:white;
    text-align:center;
    padding:20px;
    font-size:20px;
    font-weight:600;
  }
  .container{
    max-width:500px;
    margin:20px auto;
    padding:15px;
    background:white;
    border-radius:12px;
    box-shadow:0 4px 15px rgba(0,0,0,0.05);
  }
  h2{
    text-align:center;
    margin-bottom:20px;
    color:#333;
  }
  ul{
    list-style:none;
    padding:0;
    margin:0 0 20px 0;
  }
  li{
    padding:10px 12px;
    border-bottom:1px solid #eee;
    display:flex;
    justify-content:space-between;
    font-weight:500;
  }
  .compass-container{
    text-align:center;
    margin-top:20px;
  }
  .compass{
    width:200px;
    height:200px;
    border:4px solid #5E915E;
    border-radius:50%;
    margin:auto;
    position:relative;
  }
  .needle{
    width:4px;
    height:100px;
    background:red;
    position:absolute;
    top:50%;
    left:50%;
    transform-origin:bottom center;
    transform:translate(-50%, -100%) rotate(0deg);
  }
</style>
</head>
<body>

<header>Waktu Sholat</header>

<div class="container">
  <h2>Jadwal Sholat Hari Ini</h2>
  <ul id="jadwal">
    <li>Subuh <span id="subuh">--:--</span></li>
    <li>Dzuhur <span id="dzuhur">--:--</span></li>
    <li>Ashar <span id="ashar">--:--</span></li>
    <li>Maghrib <span id="maghrib">--:--</span></li>
    <li>Isya <span id="isya">--:--</span></li>
  </ul>

  <div class="compass-container">
    <h2>Arah Kiblat</h2>
    <div class="compass">
      <div class="needle" id="needle"></div>
    </div>
    <p id="angleText">--° dari utara</p>
  </div>
</div>

<script>
  // API Jadwal Sholat (Contoh kota: Jakarta)
  const kota = "Jakarta";

  fetch(`https://api.pray.zone/v2/times/today.json?city=${kota}`)
  .then(r=>r.json())
  .then(d=>{
    const times = d.results.datetime[0].times;
    document.getElementById("subuh").innerText = times.Fajr;
    document.getElementById("dzuhur").innerText = times.Dhuhr;
    document.getElementById("ashar").innerText = times.Asr;
    document.getElementById("maghrib").innerText = times.Maghrib;
    document.getElementById("isya").innerText = times.Isha;
  });

  // Arah Kiblat (menggunakan geolocation)
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;

      // Arah Ka'bah
      const kaabaLat = 21.4225;
      const kaabaLng = 39.8262;

      const y = Math.sin(kaabaLng-lng) * Math.cos(kaabaLat);
      const x = Math.cos(lat)*Math.sin(kaabaLat) -
                Math.sin(lat)*Math.cos(kaabaLat)*Math.cos(kaabaLng-lng);
      const angle = (Math.atan2(y, x) * 180/Math.PI + 360) % 360;

      const needle = document.getElementById("needle");
      needle.style.transform = `translate(-50%, -100%) rotate(${angle}deg)`;
      document.getElementById("angleText").innerText = Math.round(angle)+"° dari utara";
    });
  } else {
    document.getElementById("angleText").innerText = "Geolocation tidak didukung";
  }
</script>

</body>
</html>
