<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>E-Santri | Final</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&family=Noto+Naskh+Arabic:wght@700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1f6f51">

<style>
:root{
  --primary:#1f6f51;
  --primary-grad:linear-gradient(135deg,#1f6f51,#2ecc71);
  --bg:#f8faf9;
  --shadow:0 10px 30px rgba(31,111,81,.1);
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}
body{background:var(--bg);min-height:100vh}

/* ===== HEADER ===== */
.container{max-width:420px;margin:auto;padding:20px}
.title{text-align:center;font-size:32px;font-weight:900;color:var(--primary);margin:20px 0}

/* ===== MENU BUTTON ===== */
.menu-trigger{
  position:fixed;top:20px;right:20px;
  width:46px;height:46px;
  background:#fff;border-radius:14px;
  display:none;align-items:center;justify-content:center;
  box-shadow:var(--shadow);z-index:2000;cursor:pointer
}

/* ===== SIDEBAR ===== */
.sidebar{
  position:fixed;top:0;right:-100%;
  width:100%;height:100%;
  background:#fff;z-index:3000;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  transition:.4s;
  pointer-events:none;
}
.sidebar.open{right:0;pointer-events:auto}

.sidebar a{
  margin:10px 0;padding:14px 20px;
  border-radius:18px;background:#f8faf9;
  text-decoration:none;color:#333;font-weight:600;
}

/* ===== LOGIN ===== */
.card-login{
  background:#fff;padding:35px;border-radius:30px;
  box-shadow:var(--shadow);text-align:center
}
input{width:100%;padding:14px;margin-bottom:12px;border-radius:12px;border:1px solid #eee}
button{cursor:pointer}

.btn-google{
  display:flex;align-items:center;justify-content:center;
  gap:12px;padding:14px;border-radius:14px;
  border:1px solid #eee;background:#fff;font-weight:600
}
.btn-google img{width:22px}

/* ===== DASHBOARD ===== */
#dashboard{position:relative;z-index:10}

.streak-card{
  background:var(--primary-grad);color:#fff;
  border-radius:22px;padding:20px;
  display:flex;justify-content:space-between;
  margin-bottom:20px
}

.mahfuzat-box{
  background:#fff;padding:14px 18px;border-radius:40px;
  display:flex;align-items:center;
  box-shadow:var(--shadow);margin-bottom:25px
}
.m-label{
  background:#d4b96a;color:#fff;
  font-size:10px;font-weight:700;
  padding:5px 12px;border-radius:20px;margin-right:10px
}
.mahfuzat-track{overflow:hidden;white-space:nowrap;flex:1}
.mahfuzat-text{
  display:inline-block;
  padding-left:100%;
  animation:scroll 18s linear infinite;
}
.mahfuzat-ar{font-family:'Noto Naskh Arabic';font-size:18px;color:var(--primary)}
.mahfuzat-id{margin-left:14px;color:#555}

@keyframes scroll{
  0%{transform:translateX(0)}
  100%{transform:translateX(-100%)}
}

/* ===== MENU GRID ===== */
.menu-grid{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:15px;position:relative;z-index:20
}
.menu-item{
  background:#fff;border-radius:22px;
  padding:22px 10px;text-align:center;
  box-shadow:var(--shadow);
  cursor:pointer;user-select:none
}

/* ===== AI ===== */
#ai-btn{
  position:fixed;bottom:20px;right:20px;
  width:60px;height:60px;border-radius:50%;
  background:#15803d;color:#fff;
  display:none;align-items:center;justify-content:center;
  z-index:1500
}
#ai-window{
  position:fixed;bottom:90px;right:20px;
  width:300px;height:380px;background:#fff;
  border-radius:16px;box-shadow:var(--shadow);
  display:none;flex-direction:column;
  z-index:1600;pointer-events:none
}
#ai-window.show{display:flex;pointer-events:auto}

.hidden{display:none!important}
</style>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
</head>

<body>

<div id="menuBtn" class="menu-trigger"><i class="fa fa-ellipsis-v"></i></div>

<div id="sidebar" class="sidebar">
  <a href="#">Dashboard</a>
  <a href="#">Waktu Sholat</a>
  <a href="#">Kalender</a>
  <a href="#" onclick="logout()" style="color:red">Keluar</a>
</div>

<div class="container">
  <div class="title">E-SANTRI</div>

  <div id="loginCard" class="card-login hidden">
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()" style="width:100%;padding:14px;border:none;border-radius:14px;background:var(--primary-grad);color:#fff">MASUK</button>
    <div style="margin:15px 0;color:#ccc">â€” ATAU â€”</div>
    <button class="btn-google" onclick="loginGoogle()">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/pwa/google.svg"> Login Google
    </button>
  </div>

  <section id="dashboard" class="hidden">
    <div class="streak-card">
      <div><small>Hadir Hari Ini</small><h2>Aktif</h2></div>
      <div style="font-size:34px">ğŸ”¥</div>
    </div>

    <div class="mahfuzat-box">
      <div class="m-label">MAHFUZAT</div>
      <div class="mahfuzat-track">
        <div id="mahfuzatText" class="mahfuzat-text"></div>
      </div>
    </div>

    <div class="menu-grid">
      <div class="menu-item">ğŸ“–<br>Al-Qurâ€™an</div>
      <div class="menu-item">ğŸ“<br>Absensi</div>
      <div class="menu-item">ğŸ†<br>Tahfidz</div>
      <div class="menu-item">ğŸ“š<br>Perpus</div>
      <div class="menu-item">ğŸ“‘<br>Kamus</div>
      <div class="menu-item">ğŸ•Œ<br>Budaya</div>
    </div>
  </section>
</div>

<div id="ai-btn" onclick="toggleAI()">ğŸŒ™</div>
<div id="ai-window"></div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyCFVjE7ey5g__Iv4vUOZftB7g8GtSTSsEo",
  authDomain:"e-santri-b62be.firebaseapp.com",
  projectId:"e-santri-b62be"
});
const auth=firebase.auth();

const menuBtn=document.getElementById("menuBtn");
const sidebar=document.getElementById("sidebar");
menuBtn.onclick=()=>sidebar.classList.toggle("open");

function login(){auth.signInWithEmailAndPassword(email.value,password.value)}
function loginGoogle(){auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}
function logout(){auth.signOut()}

auth.onAuthStateChanged(u=>{
  if(u){
    dashboard.classList.remove("hidden");
    loginCard.classList.add("hidden");
    menuBtn.style.display="flex";
    aiBtn.style.display="flex";
  }else{
    loginCard.classList.remove("hidden");
  }
});

const m={ar:"Ù…ÙÙ†Ù’ Ø¬ÙØ¯ÙÙ‘ ÙˆÙØ¬ÙØ¯Ù",id:"Siapa bersungguh-sungguh akan berhasil"};
mahfuzatText.innerHTML=`<span class="mahfuzat-ar">${m.ar}</span><span class="mahfuzat-id">â€” ${m.id}</span>`;

function toggleAI(){
  document.getElementById("ai-window").classList.toggle("show");
}

if("serviceWorker"in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
