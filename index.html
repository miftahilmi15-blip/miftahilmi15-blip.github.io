<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>E-Santri</title>

<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:"Poppins", sans-serif; }
  body { background:#f7f9fb; color:#333; padding:20px; }
  .container { max-width:460px; margin:auto; }

  /* Header */
  .header-box { display:flex; align-items:center; gap:15px; padding:15px 20px; border-bottom:1px solid #ccc; }
  .logo-box { width:70px; height:70px; padding:5px; border:2px solid #2e5e4e; border-radius:12px; display:flex; justify-content:center; align-items:center; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.1); flex-shrink:0; }
  .logo { width:60px; height:60px; object-fit:contain; }
  .header-text .title { font-size:24px; font-weight:600; color:#2e5e4e; }
  .header-text .tagline { font-size:14px; color:#666; margin-top:4px; }

  /* Cards */
  .card { background:#fff; border-radius:14px; padding:20px; margin:18px 0; box-shadow:0 4px 12px rgba(0,0,0,0.08); border-left:5px solid #2e5e4e; }
  .card.small { text-align:center; padding:12px; font-size:12px; }

  input, button { width:100%; padding:12px; margin:8px 0; border-radius:10px; border:1px solid #ddd; background:#fafafa; transition:0.2s; }
  input:focus { border-color:#2e5e4e; background:white; outline:none; }

  .btn { padding:12px; border:none; border-radius:10px; cursor:pointer; transition:0.2s; }
  .btn.primary { background:#2e5e4e; color:white; }
  .btn.primary:hover { background:#234a3d; }
  .btn.secondary { background:#d9d9d9; }
  .btn.secondary:hover { background:#bfbfbf; }

  .hidden { display:none; }

  /* MENU GRID */
  .menu-grid {
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:18px;
    margin-top:10px;
  }

  .menu-item {
    background:#fff;
    padding:15px;
    border-radius:14px;
    box-shadow:0 3px 12px rgba(0,0,0,0.1);
    text-align:center;
    cursor:pointer;
    transition:0.2s;
    border:1px solid #e0e0e0;
  }

  .menu-item:hover {
    transform:translateY(-4px);
    background:#f1f7f5;
  }

  .menu-icon {
    width:50px;
    height:50px;
    margin-bottom:8px;
    object-fit:contain;
  }

  .menu-item span {
    font-size:13px;
    color:#333;
    font-weight:500;
    display:block;
    margin-top:6px;
  }

  footer small { color:#666; text-align:center; display:block; margin-top:20px; }

  @media(max-width:480px) {
    .header-box { flex-direction:column; text-align:center; gap:8px; }
    .logo-box { margin-bottom:5px; }
  }
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
</head>

<body>

<header class="header-box">
  <div class="logo-box">
    <img src="logo-assunnah.png" class="logo">
  </div>
  <div class="header-text">
    <h1 class="title">E-Santri</h1>
    <p class="tagline">Berpegang teguh pada Al-Quran dan Hadist</p>
  </div>
</header>

<main class="container">

  <!-- LOGIN CARD -->
  <section id="login-card" class="card">
    <h2>Login / Daftar</h2>

    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">

    <button class="btn primary" onclick="login()">Login</button>
    <button class="btn secondary" onclick="register()">Daftar</button>

    <p id="msg" style="color:red; margin-top:10px;"></p>
  </section>

  <!-- DASHBOARD -->
  <section id="dashboard" class="hidden">

    <div class="card small">
      <strong id="user-email"></strong><br><br>
      <button class="btn secondary" onclick="logout()">Logout</button>
    </div>

    <div class="menu-grid">

      <div class="menu-item">
        <img src="icons/absensi.png" class="menu-icon">
        <span>Absensi Santri</span>
      </div>

      <div class="menu-item">
        <img src="icons/tahfidz.png" class="menu-icon">
        <span>Tahfidz</span>
      </div>

      <div class="menu-item">
        <img src="icons/sop.png" class="menu-icon">
        <span>SOP Santri</span>
      </div>

      <div class="menu-item">
        <img src="icons/kalender.png" class="menu-icon">
        <span>Kaldik Yayasan</span>
      </div>

      <div class="menu-item">
        <img src="icons/izin.png" class="menu-icon">
        <span>Perizinan Santri</span>
      </div>

      <div class="menu-item">
        <img src="icons/fitur.png" class="menu-icon">
        <span>Fitur Lainnya</span>
      </div>

    </div>

  </section>

</main>

<footer>
  <small>Â© 2025 E-Santri | Aplikasi Absensi Santri</small>
</footer>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAQ1A9rtEoEYoriA5Y7oSB84Fd1Xnu6aes",
    authDomain: "e-santri-ed555.firebaseapp.com",
    projectId: "e-santri-ed555",
    storageBucket: "e-santri-ed555.appspot.com",
    messagingSenderId: "588687778472",
    appId: "1:588687778472:web:11ee425d3c8e5d17d2189d"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const msg = (t) => document.getElementById("msg").innerHTML = t;

  function login(){
    const email = document.getElementById("email").value;
    const pwd = document.getElementById("password").value;

    auth.signInWithEmailAndPassword(email, pwd)
      .then(()=>{ msg(""); showDashboard(auth.currentUser.email); })
      .catch(e=>msg(e.message));
  }

  function register(){
    const email = document.getElementById("email").value;
    const pwd = document.getElementById("password").value;

    auth.createUserWithEmailAndPassword(email, pwd)
      .then(()=> msg("Akun berhasil dibuat! Silakan login."))
      .catch(e=>msg(e.message));
  }

  function logout(){
    auth.signOut();
  }

  auth.onAuthStateChanged(user=>{
    if(user){ showDashboard(user.email); }
    else{
      document.getElementById("login-card").classList.remove("hidden");
      document.getElementById("dashboard").classList.add("hidden");
    }
  });

  function showDashboard(email){
    document.getElementById("login-card").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
    document.getElementById("user-email").innerHTML = email;
  }
</script>

</body>
</html>
