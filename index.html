<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>E-Santri | Premium Edition</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

  :root {
    --primary: #1f6f51;      /* hijau tua */
    --accent: #d4b96a;      /* gold */
    --bg: #f3fbf7;      
    --card: #ffffff;
    --muted: #6b6b6b;
    --soft: rgba(31, 111, 81, 0.08);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }

  body {
    background: linear-gradient(135deg, var(--bg), #eaf6f1);
    color: #123;
    padding: 20px;
    min-height: 100vh;
  }

  .container { max-width: 450px; margin: 0 auto; }

  /* ========== HEADER ========== */
  .header-box { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 12px; padding: 30px 20px; }
  .logo-box { width: 90px; height: 90px; }
  .logo { width: 100%; height: 100%; object-fit: contain; }
  .header-text .title { font-size: 26px; font-weight: 700; color: var(--primary); text-transform: uppercase; letter-spacing: 1px; }

  /* ========== CARD SIMETRIS ========== */
  .card {
    background: var(--card);
    border-radius: 12px;
    padding: 30px;
    margin: 18px 0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0,0,0,0.08); 
    text-align: center;
  }

  input {
    width: 100%; padding: 14px 16px; font-size: 15px; border-radius: 8px;
    border: 1px solid #d1d5db; background: #ffffff; margin: 10px 0; outline: none;
  }

  .btn { width: 100%; padding: 14px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; font-size: 15px; transition: 0.3s; margin-top: 10px; }
  .btn.primary { background: var(--primary); color: #fff; }
  .btn.secondary { background: #f1f5f9; color: #475569; }

  /* ========== MENU TITIK TIGA (TRIGGER) ========== */
  .menu-trigger {
    position: fixed; top: 20px; right: 20px; z-index: 1300;
    background: #fff; color: var(--primary); width: 42px; height: 42px;
    display: flex; align-items: center; justify-content: center;
    border-radius: 10px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-size: 24px; font-weight: bold; border: 1px solid #eee;
  }

  /* ========== SIDEBAR (ISI MENU ANDA) ========== */
  .sidebar {
    position: fixed; top: 0; right: -85%; width: 85%; height: 100%;
    background: #fff; transition: .4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1200; padding: 40px 20px; overflow-y: auto;
  }
  .sidebar.open { right: 0; box-shadow: -15px 0 35px rgba(0,0,0,0.1); }

  .sidebar-header { text-align: center; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #f1f5f9; }
  .sidebar-header img { width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--soft); margin-bottom: 10px; }
  
  /* Daftar Menu di dalam Sidebar */
  .menu-list { display: flex; flex-direction: column; gap: 8px; }
  .menu-link {
    display: flex; align-items: center; gap: 15px;
    padding: 14px 18px; text-decoration: none; color: #334155;
    font-weight: 600; font-size: 14px; border-radius: 10px;
    background: #f8fafb; transition: 0.2s; border: 1px solid transparent;
  }
  .menu-link:hover { background: var(--soft); color: var(--primary); border-color: var(--primary); }
  .menu-link img { width: 24px; height: 24px; }

  .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); z-index: 1100; }
  .overlay.show { display: block; }
  
  .hidden { display:none !important; }
</style>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
</head>
<body>

<div class="menu-trigger" id="menu-btn" style="display:none;">&#x22EE;</div>

<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <img id="user-photo" src="assets/default-avatar.png">
    <div id="sidebar-name" style="font-weight:700; color:var(--primary);">Memuat...</div>
    <small id="sidebar-email" style="color:var(--muted);"></small>
  </div>

  <div class="menu-list">
    <a href="#" class="menu-link" onclick="goTo('absensi.html')"><img src="icons/absensi.png"> Absensi Santri</a>
    <a href="#" class="menu-link" onclick="goTo('tahfidz.html')"><img src="icons/tahfidz.png"> Progres Tahfidz</a>
    <a href="#" class="menu-link" onclick="goTo('alquran.html')"><img src="icons/alquran.png"> Al-Quran Digital</a>
    <a href="#" class="menu-link" onclick="goTo('izin.html')"><img src="icons/izin.png"> Perizinan</a>
    <a href="#" class="menu-link" onclick="goTo('kalender.html')"><img src="icons/kalender.png"> Kalender Akademik</a>
    <a href="#" class="menu-link" onclick="goTo('sop.html')"><img src="icons/sop.png"> SOP Pesantren</a>
    
    <hr style="margin: 10px 0; border: 0; border-top: 1px solid #eee;">
    
    <a href="#" class="menu-link" onclick="alert('Buka Edit Profil')">ðŸ‘¤ Edit Profil</a>
    <a href="#" class="menu-link" onclick="alert('Buka Pengaduan')">ðŸ“© Pengaduan</a>
    <a href="#" class="menu-link" onclick="logout()" style="color: #c0392b; background: #fff5f5;">ðŸšª Keluar Akun</a>
  </div>
</div>

<div class="overlay" id="overlay"></div>

<header class="header-box">
  <div class="logo-box"><img src="logo-assunnah.png" class="logo"></div>
  <div class="header-text">
    <h1 class="title">E-Santri</h1>
    <p class="tagline">Exclusive Digital Hub</p>
  </div>
</header>

<main class="container">
  <div id="login-card" class="card">
    <h2 style="color:var(--primary); margin-bottom:20px;">Masuk</h2>
    <input type="email" id="email" placeholder="Email Santri">
    <input type="password" id="password" placeholder="Password">
    <p id="msg"></p>
    <button class="btn primary" onclick="login()">LOGIN</button>
    <button class="btn secondary" onclick="register()">DAFTAR</button>
  </div>

  <div id="dashboard" class="hidden">
    <div class="card">
      <h2 style="color:var(--primary);">Ahlan wa Sahlan!</h2>
      <p style="color:var(--muted); margin-top:10px;">Silakan klik titik tiga di pojok kanan atas untuk mengakses menu santri.</p>
    </div>
  </div>
</main>

<script>
  firebase.initializeApp({
    apiKey: "AIzaSyAQ1A9rtEoEYoriA5Y7oSB84Fd1Xnu6aes",
    authDomain: "e-santri-ed555.firebaseapp.com",
    projectId: "e-santri-ed555"
  });
  const auth = firebase.auth();

  // Logic Login & Register
  function login() {
    const e = document.getElementById("email").value;
    const p = document.getElementById("password").value;
    auth.signInWithEmailAndPassword(e, p).catch(err => alert(err.message));
  }

  function register() {
    const e = document.getElementById("email").value;
    const p = document.getElementById("password").value;
    auth.createUserWithEmailAndPassword(e, p).then(() => alert("Sukses!")).catch(err => alert(err.message));
  }

  function logout() { auth.signOut().then(() => location.reload()); }

  // Auth Listener
  auth.onAuthStateChanged(user => {
    if(user) {
      document.getElementById("login-card").classList.add("hidden");
      document.getElementById("dashboard").classList.remove("hidden");
      document.getElementById("menu-btn").style.display = "flex";
      document.getElementById("sidebar-name").innerText = user.displayName || "Santri";
      document.getElementById("sidebar-email").innerText = user.email;
    } else {
      document.getElementById("login-card").classList.remove("hidden");
      document.getElementById("dashboard").classList.add("hidden");
      document.getElementById("menu-btn").style.display = "none";
    }
  });

  // Sidebar Interaction
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");
  document.getElementById("menu-btn").onclick = () => { sidebar.classList.add("open"); overlay.classList.add("show"); }
  overlay.onclick = () => { sidebar.classList.remove("open"); overlay.classList.remove("show"); }

  function goTo(url) { window.location.href = url; }
</script>

</body>
</html>
