<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>E-SANTRI | Zen Dashboard Final</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root { --sage: #1b4d3e; --glass: rgba(255, 255, 255, 0.25); }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { height: 100vh; width: 100vw; font-family: 'Poppins', sans-serif; background: #d4e9e2; overflow: hidden; }

        /* LAYER 1: DASAR KOLAM HD */
        #pond-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://images.pexels.com/photos/2133991/pexels-photo-2133991.jpeg?auto=compress&cs=tinysrgb&w=1260') center/cover;
            z-index: 1; filter: brightness(0.9);
        }

        /* LAYER 2: IKAN KOI REAL (Logic Streak) */
        .koi-container { position: fixed; width: 100%; height: 100%; z-index: 2; pointer-events: none; }
        .koi { position: absolute; width: 100px; transition: all 3.5s cubic-bezier(0.45, 0.05, 0.55, 0.95); opacity: 0.9; }

        /* LAYER 3: INTERACTIVE (Pelet & Riak) */
        #interaction-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3; }
        .pellet { position: absolute; width: 8px; height: 8px; background: #5d4037; border-radius: 50%; animation: sink 1s forwards; }
        .ripple { position: absolute; border: 2px solid rgba(255,255,255,0.4); border-radius: 50%; transform: scale(0); animation: ripple-ani 0.8s linear; }
        @keyframes sink { to { transform: translateY(20px); opacity: 0; } }
        @keyframes ripple-ani { to { transform: scale(3); opacity: 0; } }

        /* LAYER 4: UI DASHBOARD (Sultan Style) */
        .ui-content { position: relative; z-index: 10; height: 100vh; display: flex; flex-direction: column; padding: 20px; pointer-events: none; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; pointer-events: auto; }
        
        .profile-box { 
            background: var(--glass); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            padding: 8px 12px; border-radius: 50px; display: flex; align-items: center; gap: 10px; border: 1px solid rgba(255,255,255,0.3);
        }
        .profile-box img { width: 32px; height: 32px; border-radius: 50%; border: 2px solid white; }
        .profile-box h4 { font-size: 11px; color: var(--sage); font-weight: 700; }

        .streak-card { 
            background: var(--glass); backdrop-filter: blur(10px); padding: 8px 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.3); text-align: right;
        }
        .streak-card span { font-size: 8px; font-weight: 700; color: var(--sage); display: block; opacity: 0.7; }
        .streak-card h3 { font-size: 14px; color: #b8860b; }

        /* TITIK TIGA */
        .nav-btn { position: absolute; top: 85px; right: 20px; width: 42px; height: 42px; background: white; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--sage); cursor: pointer; pointer-events: auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        /* MENU BATU MUNGIL */
        .menu-grid { flex-grow: 1; position: relative; width: 100%; pointer-events: none; }
        .stone { 
            position: absolute; width: 72px; height: 72px; background: white; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 8px 15px rgba(0,0,0,0.1); cursor: pointer; pointer-events: auto; transition: 0.2s; border: 1px solid #eee;
        }
        .stone:active { transform: scale(0.9); }
        .stone i { font-size: 20px; color: var(--sage); margin-bottom: 4px; }
        .stone span { font-size: 8px; font-weight: 800; color: var(--sage); letter-spacing: 0.5px; }

        #m1 { top: 15%; left: 5%; }
        #m2 { top: 18%; right: 5%; }
        #m3 { top: 40%; left: 50%; transform: translateX(-50%); width: 95px; height: 95px; border: 2px solid var(--sage); }
        #m4 { bottom: 25%; left: 8%; }
        #m5 { bottom: 20%; right: 10%; }
        #m6 { bottom: 35%; right: 20%; }

        /* MAHFUZAT FOOTER */
        .footer-scroll { background: var(--sage); padding: 10px; border-radius: 50px; margin-top: auto; overflow: hidden; pointer-events: auto; }
        .marquee { color: white; font-size: 10px; white-space: nowrap; animation: flow 20s linear infinite; text-align: center; }
        @keyframes flow { from { transform: translateX(100%); } to { transform: translateX(-100%); } }

        /* SIDEBAR */
        .sidebar { position: fixed; top: 0; right: -100%; width: 280px; height: 100%; background: white; z-index: 1000; transition: 0.4s cubic-bezier(0.7,0,0.3,1); padding: 50px 20px; box-shadow: -5px 0 20px rgba(0,0,0,0.1); }
        .sidebar.open { right: 0; }
        .sidebar a { display: flex; align-items: center; padding: 15px; color: #333; text-decoration: none; border-bottom: 1px solid #f5f5f5; font-size: 13px; }
        .sidebar i { width: 30px; color: var(--sage); }
    </style>
</head>
<body>

<div id="pond-bg"></div>
<div class="koi-container" id="koi-pond"></div>
<div id="interaction-layer" onclick="handleInteraction(event)"></div>

<div class="ui-content">
    <div class="top-bar">
        <div class="profile-box">
            <img src="https://ui-avatars.com/api/?name=Zaki&background=1b4d3e&color=fff&bold=true">
            <h4>AHMAD ZAKI</h4>
        </div>
        <div class="streak-card">
            <span>QURAN STREAK</span>
            <h3>12 HARI ✨</h3>
        </div>
    </div>

    <div class="nav-btn" onclick="toggleSidebar()"><i class="fa-solid fa-ellipsis-vertical"></i></div>

    <div class="menu-grid">
        <div class="stone" id="m1" onclick="alert('Absensi')"><i class="fa-solid fa-fingerprint"></i><span>ABSENSI</span></div>
        <div class="stone" id="m2" onclick="alert('Tahfidz')"><i class="fa-solid fa-medal"></i><span>TAHFIDZ</span></div>
        <div class="stone" id="m3" onclick="alert('Al-Quran')"><i class="fa-solid fa-book-quran"></i><span>AL-QURAN</span></div>
        <div class="stone" id="m4" onclick="alert('Aduan')"><i class="fa-solid fa-shield-heart"></i><span>ADUAN</span></div>
        <div class="stone" id="m5" onclick="alert('Kamus')"><i class="fa-solid fa-language"></i><span>KAMUS</span></div>
        <div class="stone" id="m6" onclick="alert('Perpus')"><i class="fa-solid fa-book-bookmark"></i><span>PERPUS</span></div>
    </div>

    <div class="footer-scroll">
        <div class="marquee">مَنْ جَدَّ وَجَدَ — Barangsiapa bersungguh-sungguh maka ia akan berhasil. — مَنْ صَبَرَ ظَفِرَ — Barangsiapa bersabar maka ia akan beruntung.</div>
    </div>
</div>

<div class="sidebar" id="sidebar">
    <h3 style="color:var(--sage); margin-bottom:20px;">Menu Navigasi</h3>
    <a href="#"><i class="fa-solid fa-calendar-day"></i> Kalender Hijriah</a>
    <a href="#"><i class="fa-solid fa-clock"></i> Jadwal Sholat</a>
    <a href="#"><i class="fa-solid fa-gear"></i> Pengaturan</a>
    <a href="#" style="color:red; margin-top:20px;"><i class="fa-solid fa-power-off"></i> Keluar Aplikasi</a>
</div>

<audio id="water-sfx" src="https://assets.mixkit.co/active_storage/sfx/1113/1113-preview.mp3"></audio>

<script>
    const streak = 12; // Contoh: Ikan nambah sesuai streak
    const koiPond = document.getElementById('koi-pond');
    const fishes = [];

    // INISIALISASI IKAN BERDASARKAN STREAK
    function initFishes() {
        for(let i=0; i<Math.min(streak, 10); i++) { // Max 10 ikan biar ga lag
            const img = document.createElement('img');
            img.src = i % 2 === 0 ? 'https://www.pngplay.com/wp-content/uploads/12/Koi-Fish-Transparent-Background.png' : 'https://www.pngplay.com/wp-content/uploads/12/Koi-Fish-PNG-HD-Quality.png';
            img.className = 'koi';
            img.style.left = Math.random() * 80 + 'vw';
            img.style.top = Math.random() * 80 + 'vh';
            koiPond.appendChild(img);
            fishes.push({ el: img, x: Math.random()*80, y: Math.random()*80 });
        }
    }

    // INTERAKSI: RIAK + PELET + FEEDING
    function handleInteraction(e) {
        // 1. Suara
        const sfx = document.getElementById('water-sfx');
        sfx.volume = 0.3; sfx.play();

        // 2. Riak Air
        const rip = document.createElement('div');
        rip.className = 'ripple';
        rip.style.left = e.clientX + 'px';
        rip.style.top = e.clientY + 'px';
        document.body.appendChild(rip);
        setTimeout(() => rip.remove(), 800);

        // 3. Pelet
        const p = document.createElement('div');
        p.className = 'pellet';
        p.style.left = e.clientX + 'px'; p.style.top = e.clientY + 'px';
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 1000);

        // 4. Ikan Ngerubung Pelet
        fishes.forEach(f => {
            const angle = Math.atan2(e.clientY - f.y, e.clientX - f.x) * 180 / Math.PI;
            f.el.style.transform = `rotate(${angle + 90}deg)`;
            f.el.style.left = (e.clientX - 50) + 'px';
            f.el.style.top = (e.clientY - 50) + 'px';
            f.x = e.clientX; f.y = e.clientY;
        });

        // Balik berenang santai setelah makan
        setTimeout(() => {
            fishes.forEach(f => {
                const nx = Math.random()*80 + 'vw';
                const ny = Math.random()*80 + 'vh';
                f.el.style.left = nx; f.el.style.top = ny;
            });
        }, 3000);
    }

    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }
    
    // Klik di luar sidebar untuk tutup
    document.addEventListener('click', (e) => {
        const sb = document.getElementById('sidebar');
        if(sb.classList.contains('open') && !e.target.closest('.sidebar') && !e.target.closest('.nav-btn')) {
            sb.classList.remove('open');
        }
    });

    window.onload = initFishes;
</script>

</body>
</html>
