<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Qur'an Digital Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --quran-green: #1f6f51;
            --bg-paper: #fcfbf7;
            --text-dark: #2d3436;
            --border-gold: #c5a059;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        body { background: #e0e6e0; color: var(--text-dark); padding-bottom: 160px; }

        header {
            background: var(--quran-green); color: white; padding: 25px 20px;
            text-align: center; position: sticky; top: 0; z-index: 100;
        }

        .main-content {
            max-width: 600px; margin: 10px auto;
            background: var(--bg-paper); min-height: 80vh;
            border-radius: 12px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* MUSHAF STYLE */
        .page-content {
            direction: rtl; text-align: justify; line-height: 2.8;
            font-family: 'Amiri', serif; font-size: 28px;
        }
        .ayah-num {
            display: inline-flex; align-items: center; justify-content: center;
            width: 40px; height: 40px; margin: 0 10px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 0 L93 25 L93 75 L50 100 L7 75 L7 25 Z" fill="none" stroke="%23c5a059" stroke-width="4"/></svg>');
            background-size: contain; font-size: 14px; font-weight: bold;
        }

        /* AUDIO PLAYER BAR */
        .audio-player-fixed {
            position: fixed; bottom: 70px; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 600px; background: white;
            padding: 15px; border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.15); z-index: 110;
        }
        .audio-info { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.8rem; font-weight: bold; color: var(--quran-green); }
        audio { width: 100%; height: 35px; }

        /* NAV BAR */
        .nav-bar {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 600px; background: #fff;
            display: flex; justify-content: space-around; padding: 15px;
            border-top: 1px solid #eee; z-index: 120;
        }
        .nav-btn { border: none; background: none; color: #888; font-weight: bold; cursor: pointer; }
        .nav-btn.active { color: var(--quran-green); }

        .hidden { display: none; }
    </style>
</head>
<body>

<header>
    <h2 id="currentTitle">Murottal Al-Qur'an</h2>
    <div style="margin-top: 10px;">
        <select id="surahSelect" style="padding: 8px; border-radius: 8px; width: 70%;"></select>
    </div>
</header>

<div class="main-content">
    <div id="quranSection">
        <div id="quranText" class="page-content">Memuat Al-Qur'an...</div>
    </div>

    <div id="waqafSection" class="hidden">
        <h3 style="text-align: center; margin-bottom: 20px; color: var(--quran-green);">Tanda Waqaf</h3>
        <p style="text-align:center; color:#666;">(Data Tanda Waqaf Sesuai Gambar Anda)</p>
    </div>
</div>

<div class="audio-player-fixed">
    <div class="audio-info">
        <span id="audioStatus">Mendengarkan: -</span>
        <span>Qori: Mishary Rashid</span>
    </div>
    <audio id="mainAudio" controls></audio>
</div>

<nav class="nav-bar">
    <button class="nav-btn active" onclick="showPage('quran')">ğŸ“– BACA</button>
    <button class="nav-btn" onclick="showPage('waqaf')">ğŸ“ WAQAF</button>
</nav>

<script>
    const surahSelect = document.getElementById("surahSelect");
    const quranText = document.getElementById("quranText");
    const mainAudio = document.getElementById("mainAudio");
    const audioStatus = document.getElementById("audioStatus");

    // 1. Ambil Daftar Surah
    fetch("https://api.quran.gading.dev/surah")
        .then(r => r.json())
        .then(d => {
            d.data.forEach(s => {
                let opt = new Option(`${s.number}. ${s.name.transliteration.id}`, s.number);
                surahSelect.add(opt);
            });
            loadSurah(1); // Mulai dari Al-Fatihah
        });

    surahSelect.onchange = () => loadSurah(surahSelect.value);

    // 2. Fungsi Load Surah & Audio
    function loadSurah(no) {
        quranText.innerHTML = "Memuat ayat...";
        
        // Update Audio
        // Menggunakan API mp3quran.net yang stabil
        const audioUrl = `https://server8.mp3quran.net/afs/${no.toString().padStart(3, '0')}.mp3`;
        mainAudio.src = audioUrl;
        
        fetch(`https://api.quran.gading.dev/surah/${no}`)
            .then(r => r.json())
            .then(d => {
                const data = d.data;
                document.getElementById("currentTitle").innerText = data.name.transliteration.id;
                audioStatus.innerText = `Mendengarkan: Surah ${data.name.transliteration.id}`;

                let html = "";
                if(no != 1 && no != 9) html += `<div style="text-align:center; margin-bottom:20px; font-size:32px;">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>`;
                
                data.verses.forEach(v => {
                    html += `${v.text.arab} <span class="ayah-num">${v.number.inSurah}</span> `;
                });
                quranText.innerHTML = html;
            });
    }

    function showPage(p) {
        document.getElementById('quranSection').className = p === 'quran' ? '' : 'hidden';
        document.getElementById('waqafSection').className = p === 'waqaf' ? '' : 'hidden';
        document.querySelectorAll('.nav-btn').forEach((b, i) => {
            b.classList.toggle('active', (i === 0 && p === 'quran') || (i === 1 && p === 'waqaf'));
        });
    }
</script>

</body>
</html>
