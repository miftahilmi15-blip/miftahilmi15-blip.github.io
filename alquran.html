<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Al-Qur'an Digital</title>

  <!-- Font Arab -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 24px;
      background: #f8f7f3;
      color: #1f2937;
    }

    h1 {
      text-align: center;
      color: #064e3b;
      margin-bottom: 16px;
    }

    select, button {
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    .toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .bismillah {
      text-align: center;
      font-family: 'Amiri', serif;
      font-size: 36px;
      margin: 30px 0;
      color: #065f46;
    }

    .ayah {
      margin-bottom: 28px;
    }

    .arab {
      font-family: 'Amiri', serif;
      font-size: 34px;
      text-align: right;
      direction: rtl;
      line-height: 2.2;
    }

    .ayah-number {
      font-size: 20px;
      margin-right: 6px;
      color: #065f46;
    }

    .arti {
      margin-top: 6px;
      color: #374151;
    }

    audio {
      width: 100%;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<h1>Al-Qur'an Digital</h1>

<div class="toolbar">
  <select id="surahSelect"></select>
</div>

<audio id="audio" controls></audio>

<div id="content"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {

  const surahSelect = document.getElementById("surahSelect");
  const content = document.getElementById("content");
  const audio = document.getElementById("audio");

  // Ambil daftar surah
  fetch("https://api.quran.gading.dev/surah")
    .then(res => res.json())
    .then(data => {
      surahSelect.innerHTML = "";

      data.data.forEach(surah => {
        const opt = document.createElement("option");
        opt.value = surah.number;
        opt.textContent =
          surah.number + ". " + surah.name.transliteration.id;
        surahSelect.appendChild(opt);
      });

      loadSurah(1);
    });

  surahSelect.addEventListener("change", function () {
    loadSurah(this.value);
  });

  function loadSurah(no) {
    content.innerHTML = "Memuat ayat...";

    // Audio per surat (Mishary)
    audio.src =
      `https://server8.mp3quran.net/afs/${String(no).padStart(3, "0")}.mp3`;

    fetch(`https://api.quran.gading.dev/surah/${no}`)
      .then(res => res.json())
      .then(data => {
        content.innerHTML = "";

        // Bismillah (kecuali At-Taubah = 9)
        if (no != 9) {
          const bis = document.createElement("div");
          bis.className = "bismillah";
          bis.textContent = "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ";
          content.appendChild(bis);
        }

        data.data.verses.forEach(v => {
          const div = document.createElement("div");
          div.className = "ayah";
          div.innerHTML = `
            <div class="arab">
              ${v.text.arab}
              <span class="ayah-number">۝${v.number.inSurah}</span>
            </div>
            <div class="arti">${v.translation.id}</div>
          `;
          content.appendChild(div);
        });
      });
  }

});
</script>

</body>
</html>

